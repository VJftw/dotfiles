---
- name: Configure default editor
  with_items: "{{ users }}"
  loop_control:
    label: "{{ item.name }}"
  become: "{{ item.name }}"
  blockinfile:
    path: "~/.profile"
    insertafter: EOF
    marker: "# {mark} ANSIBLE MANAGED BLOCK - editor"
    block: |
      export EDITOR=vim

# TODO: gpg